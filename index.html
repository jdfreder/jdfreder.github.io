<html>
  <head>
    <title>dependo</title>
    <style>
        body {
    background: #fff;
    padding:0;
    margin:0;
    font-family:helvetica,arial;
    overflow: hidden;
  }

  .graph {
    width:100%;
    height: 100%;
    fill: #000;
    overflow: hidden;
    position: relative;
  }

  svg {
    height: 100%;
    width: 100%;
  }

  g.dimmed  {
    stroke-opacity: 0.05;
  }

  g.dimmed text.shadow {
    stroke-opacity: 0;
  }

  circle {
    fill: #ccc;
    stroke: #333;
    stroke-width: 1.5px;
  }

  text {
    font: 10px sans-serif;
    pointer-events: none;
  }

  text.shadow {
    stroke: #fff;
    stroke-width: 3px;
    stroke-opacity: .8;
  }

  path.link {
    fill: none;
    stroke: #666;
    stroke-width: 1.5px;
  }

  path.link.licensing {
    stroke: green;
  }

  path.link.resolved {
    stroke-dasharray: 0,2 1;
  }


  .control-zoom {
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.25);
    padding: 5px;
    border-radius: 7px;
    z-index: 100;
  }

  .control-zoom a {
    background: rgba(255, 255, 255, 0.75);
    background-position: 50% 50%;
    background-repeat: no-repeat;
    display: block;
    width: 19px;
    height: 19px;
    border-radius: 4px;
  }

  .control-zoom a:last-child {
    margin: 0;
  }

  .control-zoom a:hover {
    background-color: white;
  }

  .control-zoom > .control-zoom-in {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUwRTZCRkI3NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUwRTZCRkI4NjQzNzExRTBBQUI3RTAwMUU2MTZDRkQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTBFNkJGQjU2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFNkJGQjY2NDM3MTFFMEFBQjdFMDAxRTYxNkNGRDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7cwPMXAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAARSURBVAhbY3jcwABBcAATAQBxlwhT4XiahwAAAABJRU5ErkJggg==);
    margin-bottom: 5px;
  }

  .control-zoom > .control-zoom-out {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU5MjRDMEQ5NjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU5MjRDMERBNjQzNzExRTBCM0JDQkU2MzVGQTBCNjRDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTkyNEMwRDc2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTkyNEMwRDg2NDM3MTFFMEIzQkNCRTYzNUZBMEI2NEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7uh53jAAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAAARSURBVAhbY/jfwABBcAATAQB6xwj7vHGbwAAAAABJRU5ErkJggg==);
    margin-bottom: 5px;
  }

    </style>
  </head>

  <body>
    <div class="graph">
      <div class="control-zoom">
          <a class="control-zoom-in" href="#" title="Zoom in"></a>
          <a class="control-zoom-out" href="#" title="Zoom out"></a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.0.1/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <script>
      var getGraphData = function() { return {"directed":true,"multigraph":false,"graph":[],"nodes":[{"id":"auth/js/loginmain"},{"id":"base/js/page"},{"id":"auth/js/loginwidget"},{"id":"base/js/namespace"},{"id":"base/js/utils"},{"id":"jquery"},{"id":"auth/js/logoutmain"},{"id":"base/js/dialog"},{"id":"base/js/events"},{"id":"base/js/keyboard"},{"id":"components/bootstrap/js/bootstrap.min"},{"id":"components/jquery-ui/ui/minified/jquery-ui.min"},{"id":"base/js/pagemain"},{"id":"base/js/security"},{"id":"components/google-caja/html-css-sanitizer-minified"},{"id":"components/backbone/backbone"},{"id":"components/backbone/backbone-min"},{"id":"components/bootstrap-tour/build/js/bootstrap-tour"},{"id":"components/bootstrap-tour/build/js/bootstrap-tour.min"},{"id":"components/bootstrap/js/bootstrap"},{"id":"components/bootstrap/less/bootstrap"},{"id":"components/bootstrap/less/bootstrap.min"},{"id":"components/codemirror/addon/comment/comment"},{"id":"components/codemirror/addon/comment/continuecomment"},{"id":"components/codemirror/addon/dialog/dialog"},{"id":"components/codemirror/addon/display/fullscreen"},{"id":"components/codemirror/addon/display/placeholder"},{"id":"components/codemirror/addon/display/rulers"},{"id":"components/codemirror/addon/edit/closebrackets"},{"id":"components/codemirror/addon/edit/closetag"},{"id":"components/codemirror/addon/edit/continuelist"},{"id":"components/codemirror/addon/edit/matchbrackets"},{"id":"components/codemirror/addon/edit/matchtags"},{"id":"components/codemirror/addon/edit/trailingspace"},{"id":"components/codemirror/addon/fold/brace-fold"},{"id":"components/codemirror/addon/fold/comment-fold"},{"id":"components/codemirror/addon/fold/foldcode"},{"id":"components/codemirror/addon/fold/foldgutter"},{"id":"components/codemirror/addon/fold/indent-fold"},{"id":"components/codemirror/addon/fold/markdown-fold"},{"id":"components/codemirror/addon/fold/xml-fold"},{"id":"components/codemirror/addon/hint/anyword-hint"},{"id":"components/codemirror/addon/hint/css-hint"},{"id":"components/codemirror/addon/hint/html-hint"},{"id":"components/codemirror/addon/hint/javascript-hint"},{"id":"components/codemirror/addon/hint/python-hint"},{"id":"components/codemirror/addon/hint/show-hint"},{"id":"components/codemirror/addon/hint/sql-hint"},{"id":"components/codemirror/addon/hint/xml-hint"},{"id":"components/codemirror/addon/lint/coffeescript-lint"},{"id":"components/codemirror/addon/lint/css-lint"},{"id":"components/codemirror/addon/lint/javascript-lint"},{"id":"components/codemirror/addon/lint/json-lint"},{"id":"components/codemirror/addon/lint/lint"},{"id":"components/codemirror/addon/lint/yaml-lint"},{"id":"components/codemirror/addon/merge/dep/diff_match_patch"},{"id":"components/codemirror/addon/merge/merge"},{"id":"components/codemirror/addon/mode/loadmode"},{"id":"components/codemirror/addon/mode/multiplex"},{"id":"components/codemirror/addon/mode/multiplex_test"},{"id":"components/codemirror/addon/mode/overlay"},{"id":"components/codemirror/addon/runmode/colorize"},{"id":"components/codemirror/addon/runmode/runmode"},{"id":"components/codemirror/addon/runmode/runmode-standalone"},{"id":"components/codemirror/addon/runmode/runmode.node"},{"id":"components/codemirror/addon/scroll/scrollpastend"},{"id":"components/codemirror/addon/search/match-highlighter"},{"id":"components/codemirror/addon/search/search"},{"id":"components/codemirror/addon/search/searchcursor"},{"id":"components/codemirror/addon/selection/active-line"},{"id":"components/codemirror/addon/selection/mark-selection"},{"id":"components/codemirror/addon/tern/tern"},{"id":"components/codemirror/addon/tern/worker"},{"id":"components/codemirror/addon/wrap/hardwrap"},{"id":"components/codemirror/keymap/emacs"},{"id":"components/codemirror/keymap/extra"},{"id":"components/codemirror/keymap/vim"},{"id":"components/codemirror/lib/codemirror"},{"id":"components/codemirror/mode/apl/apl"},{"id":"components/codemirror/mode/asterisk/asterisk"},{"id":"components/codemirror/mode/clike/clike"},{"id":"components/codemirror/mode/clojure/clojure"},{"id":"components/codemirror/mode/cobol/cobol"},{"id":"components/codemirror/mode/coffeescript/coffeescript"},{"id":"components/codemirror/mode/commonlisp/commonlisp"},{"id":"components/codemirror/mode/css/css"},{"id":"components/codemirror/mode/css/less_test"},{"id":"components/codemirror/mode/css/scss_test"},{"id":"components/codemirror/mode/css/test"},{"id":"components/codemirror/mode/d/d"},{"id":"components/codemirror/mode/diff/diff"},{"id":"components/codemirror/mode/django/django"},{"id":"components/codemirror/mode/dtd/dtd"},{"id":"components/codemirror/mode/dylan/dylan"},{"id":"components/codemirror/mode/ecl/ecl"},{"id":"components/codemirror/mode/eiffel/eiffel"},{"id":"components/codemirror/mode/erlang/erlang"},{"id":"components/codemirror/mode/fortran/fortran"},{"id":"components/codemirror/mode/gas/gas"},{"id":"components/codemirror/mode/gfm/gfm"},{"id":"components/codemirror/mode/gfm/test"},{"id":"components/codemirror/mode/gherkin/gherkin"},{"id":"components/codemirror/mode/go/go"},{"id":"components/codemirror/mode/groovy/groovy"},{"id":"components/codemirror/mode/haml/haml"},{"id":"components/codemirror/mode/haml/test"},{"id":"components/codemirror/mode/haskell/haskell"},{"id":"components/codemirror/mode/haxe/haxe"},{"id":"components/codemirror/mode/htmlembedded/htmlembedded"},{"id":"components/codemirror/mode/htmlmixed/htmlmixed"},{"id":"components/codemirror/mode/http/http"},{"id":"components/codemirror/mode/jade/jade"},{"id":"components/codemirror/mode/javascript/javascript"},{"id":"components/codemirror/mode/javascript/test"},{"id":"components/codemirror/mode/jinja2/jinja2"},{"id":"components/codemirror/mode/julia/julia"},{"id":"components/codemirror/mode/less/less"},{"id":"components/codemirror/mode/livescript/livescript"},{"id":"components/codemirror/mode/lua/lua"},{"id":"components/codemirror/mode/markdown/markdown"},{"id":"components/codemirror/mode/markdown/test"},{"id":"components/codemirror/mode/meta"},{"id":"components/codemirror/mode/mirc/mirc"},{"id":"components/codemirror/mode/mllike/mllike"},{"id":"components/codemirror/mode/nginx/nginx"},{"id":"components/codemirror/mode/ntriples/ntriples"},{"id":"components/codemirror/mode/octave/octave"},{"id":"components/codemirror/mode/pascal/pascal"},{"id":"components/codemirror/mode/pegjs/pegjs"},{"id":"components/codemirror/mode/perl/perl"},{"id":"components/codemirror/mode/php/php"},{"id":"components/codemirror/mode/php/test"},{"id":"components/codemirror/mode/pig/pig"},{"id":"components/codemirror/mode/properties/properties"},{"id":"components/codemirror/mode/puppet/puppet"},{"id":"components/codemirror/mode/python/python"},{"id":"components/codemirror/mode/q/q"},{"id":"components/codemirror/mode/r/r"},{"id":"components/codemirror/mode/rpm/changes/changes"},{"id":"components/codemirror/mode/rpm/spec/spec"},{"id":"components/codemirror/mode/rst/rst"},{"id":"components/codemirror/mode/ruby/ruby"},{"id":"components/codemirror/mode/ruby/test"},{"id":"components/codemirror/mode/rust/rust"},{"id":"components/codemirror/mode/sass/sass"},{"id":"components/codemirror/mode/scheme/scheme"},{"id":"components/codemirror/mode/shell/shell"},{"id":"components/codemirror/mode/sieve/sieve"},{"id":"components/codemirror/mode/smalltalk/smalltalk"},{"id":"components/codemirror/mode/smarty/smarty"},{"id":"components/codemirror/mode/smartymixed/smartymixed"},{"id":"components/codemirror/mode/solr/solr"},{"id":"components/codemirror/mode/sparql/sparql"},{"id":"components/codemirror/mode/sql/sql"},{"id":"components/codemirror/mode/stex/stex"},{"id":"components/codemirror/mode/stex/test"},{"id":"components/codemirror/mode/tcl/tcl"},{"id":"components/codemirror/mode/tiddlywiki/tiddlywiki"},{"id":"components/codemirror/mode/tiki/tiki"},{"id":"components/codemirror/mode/toml/toml"},{"id":"components/codemirror/mode/turtle/turtle"},{"id":"components/codemirror/mode/vb/vb"},{"id":"components/codemirror/mode/vbscript/vbscript"},{"id":"components/codemirror/mode/velocity/velocity"},{"id":"components/codemirror/mode/verilog/test"},{"id":"components/codemirror/mode/verilog/verilog"},{"id":"components/codemirror/mode/xml/test"},{"id":"components/codemirror/mode/xml/xml"},{"id":"components/codemirror/mode/xquery/test"},{"id":"components/codemirror/mode/xquery/xquery"},{"id":"components/codemirror/mode/yaml/yaml"},{"id":"components/codemirror/mode/z80/z80"},{"id":"components/google-caja/html-css-sanitizer-bundle"},{"id":"components/google-caja/html-sanitizer-bundle"},{"id":"components/google-caja/html-sanitizer-minified"},{"id":"components/highlight"},{"id":"components/highlight.js/build/highlight.pack"},{"id":"components/highlight.js/src/highlight"},{"id":"components/highlight.js/src/languages/1c"},{"id":"components/highlight.js/src/languages/actionscript"},{"id":"components/highlight.js/src/languages/apache"},{"id":"components/highlight.js/src/languages/applescript"},{"id":"components/highlight.js/src/languages/avrasm"},{"id":"components/highlight.js/src/languages/axapta"},{"id":"components/highlight.js/src/languages/bash"},{"id":"components/highlight.js/src/languages/brainfuck"},{"id":"components/highlight.js/src/languages/clojure"},{"id":"components/highlight.js/src/languages/cmake"},{"id":"components/highlight.js/src/languages/coffeescript"},{"id":"components/highlight.js/src/languages/cpp"},{"id":"components/highlight.js/src/languages/cs"},{"id":"components/highlight.js/src/languages/css"},{"id":"components/highlight.js/src/languages/d"},{"id":"components/highlight.js/src/languages/delphi"},{"id":"components/highlight.js/src/languages/diff"},{"id":"components/highlight.js/src/languages/django"},{"id":"components/highlight.js/src/languages/dos"},{"id":"components/highlight.js/src/languages/erlang"},{"id":"components/highlight.js/src/languages/erlang-repl"},{"id":"components/highlight.js/src/languages/glsl"},{"id":"components/highlight.js/src/languages/go"},{"id":"components/highlight.js/src/languages/haskell"},{"id":"components/highlight.js/src/languages/http"},{"id":"components/highlight.js/src/languages/ini"},{"id":"components/highlight.js/src/languages/java"},{"id":"components/highlight.js/src/languages/javascript"},{"id":"components/highlight.js/src/languages/json"},{"id":"components/highlight.js/src/languages/lisp"},{"id":"components/highlight.js/src/languages/lua"},{"id":"components/highlight.js/src/languages/markdown"},{"id":"components/highlight.js/src/languages/matlab"},{"id":"components/highlight.js/src/languages/mel"},{"id":"components/highlight.js/src/languages/nginx"},{"id":"components/highlight.js/src/languages/objectivec"},{"id":"components/highlight.js/src/languages/parser3"},{"id":"components/highlight.js/src/languages/perl"},{"id":"components/highlight.js/src/languages/php"},{"id":"components/highlight.js/src/languages/profile"},{"id":"components/highlight.js/src/languages/python"},{"id":"components/highlight.js/src/languages/r"},{"id":"components/highlight.js/src/languages/rib"},{"id":"components/highlight.js/src/languages/rsl"},{"id":"components/highlight.js/src/languages/ruby"},{"id":"components/highlight.js/src/languages/rust"},{"id":"components/highlight.js/src/languages/scala"},{"id":"components/highlight.js/src/languages/smalltalk"},{"id":"components/highlight.js/src/languages/sql"},{"id":"components/highlight.js/src/languages/tex"},{"id":"components/highlight.js/src/languages/vala"},{"id":"components/highlight.js/src/languages/vbscript"},{"id":"components/highlight.js/src/languages/vhdl"},{"id":"components/highlight.js/src/languages/xml"},{"id":"components/jquery-ui/ui/i18n/jquery-ui-i18n"},{"id":"components/jquery-ui/ui/jquery-ui"},{"id":"components/jquery-ui/ui/minified/i18n/jquery-ui-i18n.min"},{"id":"components/jquery/jquery-migrate"},{"id":"components/jquery/jquery-migrate.min"},{"id":"components/marked/index"},{"id":"components/marked/lib/marked"},{"id":"components/requirejs/require"},{"id":"components/underscore/underscore"},{"id":"components/underscore/underscore-min"},{"id":"custom/custom"},{"id":"dateformat/date.format"},{"id":"notebook/js/cell"},{"id":"notebook/js/celltoolbar"},{"id":"notebook/js/textcell"},{"id":"notebook/js/celltoolbarpresets/default"},{"id":"notebook/js/celltoolbarpresets/example"},{"id":"notebook/js/celltoolbarpresets/rawcell"},{"id":"notebook/js/celltoolbarpresets/slideshow"},{"id":"notebook/js/codecell"},{"id":"notebook/js/completer"},{"id":"notebook/js/outputarea"},{"id":"notebook/js/tooltip"},{"id":"notebook/js/codemirror-ipython"},{"id":"notebook/js/codemirror-ipythongfm"},{"id":"notebook/js/contexthint"},{"id":"notebook/js/config"},{"id":"notebook/js/keyboardmanager"},{"id":"notebook/js/layoutmanager"},{"id":"notebook/js/main"},{"id":"notebook/js/maintoolbar"},{"id":"notebook/js/menubar"},{"id":"notebook/js/notebook"},{"id":"notebook/js/notificationarea"},{"id":"notebook/js/pager"},{"id":"notebook/js/quickhelp"},{"id":"notebook/js/savewidget"},{"id":"notebook/js/toolbar"},{"id":"notebook/js/mathjaxutils"},{"id":"notebook/js/tour"},{"id":"services/sessions/js/session"},{"id":"notebook/js/notificationwidget"},{"id":"services/kernels/js/comm"},{"id":"services/kernels/js/kernel"},{"id":"widgets/js/init"},{"id":"tree/js/clusterlist"},{"id":"tree/js/kernellist"},{"id":"tree/js/notebooklist"},{"id":"tree/js/main"},{"id":"tree/js/sessionlist"},{"id":"widgets/js/manager"},{"id":"widgets/js/widget_bool"},{"id":"widgets/js/widget_button"},{"id":"widgets/js/widget_container"},{"id":"widgets/js/widget_float"},{"id":"widgets/js/widget_image"},{"id":"widgets/js/widget_int"},{"id":"widgets/js/widget_selection"},{"id":"widgets/js/widget_selectioncontainer"},{"id":"widgets/js/widget_string"},{"id":"backbone"},{"id":"underscore"},{"id":"widgets/js/widget"}],"links":[{"source":0,"target":1},{"source":2,"target":3},{"source":2,"target":4},{"source":2,"target":5},{"source":6,"target":1},{"source":7,"target":3},{"source":7,"target":5},{"source":8,"target":3},{"source":9,"target":3},{"source":9,"target":4},{"source":9,"target":5},{"source":1,"target":2},{"source":1,"target":3},{"source":1,"target":10},{"source":1,"target":11},{"source":1,"target":5},{"source":12,"target":1},{"source":13,"target":3},{"source":13,"target":14},{"source":13,"target":5},{"source":4,"target":3},{"source":4,"target":5},{"source":244,"target":3},{"source":244,"target":4},{"source":244,"target":5},{"source":245,"target":3},{"source":245,"target":5},{"source":245,"target":246},{"source":251,"target":9},{"source":251,"target":3},{"source":251,"target":4},{"source":251,"target":5},{"source":251,"target":244},{"source":251,"target":245},{"source":251,"target":252},{"source":251,"target":253},{"source":251,"target":254},{"source":252,"target":9},{"source":252,"target":3},{"source":252,"target":4},{"source":252,"target":5},{"source":252,"target":257},{"source":259,"target":9},{"source":259,"target":3},{"source":259,"target":4},{"source":259,"target":5},{"source":260,"target":3},{"source":260,"target":5},{"source":261,"target":2},{"source":261,"target":8},{"source":261,"target":3},{"source":261,"target":1},{"source":261,"target":4},{"source":261,"target":5},{"source":261,"target":258},{"source":261,"target":259},{"source":261,"target":260},{"source":261,"target":262},{"source":261,"target":263},{"source":261,"target":264},{"source":261,"target":265},{"source":261,"target":266},{"source":261,"target":267},{"source":261,"target":268},{"source":262,"target":3},{"source":262,"target":5},{"source":262,"target":245},{"source":262,"target":269},{"source":270,"target":7},{"source":270,"target":4},{"source":270,"target":5},{"source":263,"target":3},{"source":263,"target":4},{"source":263,"target":18},{"source":263,"target":5},{"source":263,"target":271},{"source":264,"target":7},{"source":264,"target":9},{"source":264,"target":3},{"source":264,"target":4},{"source":264,"target":10},{"source":264,"target":11},{"source":264,"target":238},{"source":264,"target":5},{"source":264,"target":245},{"source":264,"target":251},{"source":264,"target":270},{"source":264,"target":246},{"source":264,"target":272},{"source":265,"target":7},{"source":265,"target":3},{"source":265,"target":4},{"source":265,"target":5},{"source":265,"target":273},{"source":273,"target":3},{"source":273,"target":5},{"source":253,"target":9},{"source":253,"target":3},{"source":253,"target":13},{"source":253,"target":4},{"source":253,"target":5},{"source":253,"target":270},{"source":266,"target":3},{"source":266,"target":4},{"source":266,"target":5},{"source":267,"target":7},{"source":267,"target":3},{"source":267,"target":4},{"source":267,"target":5},{"source":268,"target":7},{"source":268,"target":9},{"source":268,"target":3},{"source":268,"target":4},{"source":268,"target":243},{"source":268,"target":5},{"source":246,"target":3},{"source":246,"target":13},{"source":246,"target":5},{"source":246,"target":244},{"source":246,"target":245},{"source":246,"target":270},{"source":269,"target":3},{"source":269,"target":5},{"source":254,"target":3},{"source":254,"target":4},{"source":254,"target":5},{"source":271,"target":3},{"source":271,"target":5},{"source":274,"target":3},{"source":274,"target":4},{"source":274,"target":5},{"source":275,"target":3},{"source":275,"target":4},{"source":275,"target":5},{"source":275,"target":274},{"source":275,"target":276},{"source":272,"target":3},{"source":272,"target":4},{"source":272,"target":5},{"source":272,"target":275},{"source":277,"target":3},{"source":277,"target":4},{"source":277,"target":5},{"source":278,"target":3},{"source":278,"target":5},{"source":278,"target":279},{"source":280,"target":2},{"source":280,"target":8},{"source":280,"target":3},{"source":280,"target":1},{"source":280,"target":4},{"source":280,"target":10},{"source":280,"target":11},{"source":280,"target":5},{"source":280,"target":277},{"source":280,"target":278},{"source":280,"target":279},{"source":280,"target":281},{"source":279,"target":7},{"source":279,"target":3},{"source":279,"target":4},{"source":279,"target":5},{"source":281,"target":3},{"source":281,"target":4},{"source":281,"target":5},{"source":276,"target":282},{"source":276,"target":283},{"source":276,"target":284},{"source":276,"target":285},{"source":276,"target":286},{"source":276,"target":287},{"source":276,"target":288},{"source":276,"target":289},{"source":276,"target":290},{"source":276,"target":291},{"source":282,"target":292},{"source":282,"target":293},{"source":294,"target":292},{"source":294,"target":293},{"source":294,"target":282},{"source":283,"target":294},{"source":284,"target":294},{"source":285,"target":294},{"source":286,"target":294},{"source":286,"target":288},{"source":287,"target":294},{"source":288,"target":294},{"source":289,"target":4},{"source":289,"target":294},{"source":290,"target":4},{"source":290,"target":294},{"source":291,"target":294}]};};

      (function() {

  var url = 'data.json'
  var r = 10;
  var graph, layout, zoom, nodes, links, data;
  var linkedByIndex = {};
  var graphWidth, graphHeight;

  // Helpers
  function formatClassName(prefix, object) {
    return prefix + '-' + object.id.replace(/(\.|\/)/gi, '-');
  }

  function findElementByNode(prefix, node) {
    var selector = '.'+formatClassName(prefix, node);
    return graph.select(selector);
  }

  function isConnected(a, b) {
    return linkedByIndex[a.index + "," + b.index] || linkedByIndex[b.index + "," + a.index] || a.index == b.index;
  }

  function fadeRelatedNodes(d, opacity, nodes, links) {

    // Clean
    $('path.link').removeAttr('data-show');

    nodes.style("stroke-opacity", function(o) {

      if (isConnected(d, o)) {
        thisOpacity = 1;
      } else {
        thisOpacity = opacity;
      }

      this.setAttribute('fill-opacity', thisOpacity);
      this.setAttribute('stroke-opacity', thisOpacity);

      if(thisOpacity == 1) {
        this.classList.remove('dimmed');
      } else {
        this.classList.add('dimmed');
      }

      return thisOpacity;
    });

    links.style("stroke-opacity", function(o) {

      if (o.source === d) {

        // Highlight target/sources of the link
        var elmNodes = graph.selectAll('.'+formatClassName('node', o.target));
        elmNodes.attr('fill-opacity', 1);
        elmNodes.attr('stroke-opacity', 1);

        elmNodes.classed('dimmed', false);

        // Highlight arrows
        var elmCurrentLink = $('path.link[data-source=' + o.source.index + ']');
        elmCurrentLink.attr('data-show', true);
        elmCurrentLink.attr('marker-end', 'url(#regular)');

        return 1;

      } else {

        var elmAllLinks = $('path.link:not([data-show])');

        if(opacity == 1) {
          elmAllLinks.attr('marker-end', 'url(#regular)');
        } else {
          elmAllLinks.attr('marker-end', '');
        }

        return opacity;
      }

    });
  }


  function render() {

    zoom = d3.behavior.zoom();
    zoom.on("zoom", onZoomChanged);

    // Setup layout
    layout = d3.layout.force()
      .gravity(.05)
      .charge(-300)
      .linkDistance(100);

    // Setup graph
    graph = d3.select(".graph")
      .append("svg:svg")
      .attr("pointer-events", "all")
      .call(zoom)
      .append('svg:g')
        .attr('width', graphWidth)
        .attr('height', graphHeight);

    d3.select(window).on("resize", resize);

    // Load graph data
    var graphData = window.getGraphData();
    renderGraph(graphData);

    data = graphData;

    // Resize
    resize();

    centerGraph();

    // Controlers
    $('.control-zoom a').on('click', onControlZoomClicked);
  }

  function resize() {
    graphWidth = window.innerWidth,
    graphHeight = window.innerHeight;
    graph.attr("width", graphWidth)
         .attr("height", graphHeight);

    layout.size([graphWidth, graphHeight])
          .resume();
  }

  function centerGraph() {

    var centerTranslate = [
      (graphWidth / 2) - (graphWidth * 0.2 / 2),
      (graphHeight / 2) - (graphHeight * 0.2 / 2),
    ];

    zoom.translate(centerTranslate);

    // Render transition
    graph.transition()
      .duration(500)
      .attr("transform", "translate(" + zoom.translate() + ")" + " scale(" + zoom.scale() + ")");
  }

  function renderGraph(data) {


    // Markers
    graph.append("svg:defs").selectAll("marker")
        .data(['regular'])
      .enter().append("svg:marker")
        .attr("id", String)
        .attr("viewBox", "0 -5 10 10")
        .attr("refX", 15)
        .attr("refY", -1.5)
        .attr("markerWidth", 6)
        .attr("markerHeight", 6)
        .attr("orient", "auto")
      .append("svg:path")
        .attr("d", "M0,-5L10,0L0,5");

    // Lines
    links = graph.append('svg:g').selectAll("line")
      .data(data.links)
      .enter().append("svg:path")
      .attr('class', 'link')
      .attr("data-target", function(o) { return o.target })
      .attr("data-source", function(o) { return o.source })
      .attr("marker-end", function(d) { return "url(#regular)"; });

    // Nodes
    nodes = graph.append('svg:g').selectAll("node")
      .data(data.nodes)
      .enter().append("svg:g")
      .attr("class","node")
      .call(layout.drag)
      .on("mousedown", onNodeMouseDown);

      // Circles
      nodes.attr("class", function(d) { return formatClassName('node', d) })
      nodes.append("svg:circle")
        .attr("class", function(d) { return formatClassName('circle', d) })
        .attr("r", 6)
        .on("mouseover", _.bind(onNodeMouseOver, this, nodes, links))
        .on("mouseout", _.bind(onNodeMouseOut, this, nodes, links) );


      // A copy of the text with a thick white stroke for legibility.
      nodes.append("svg:text")
          .attr("x", 15)
          .attr("y", ".31em")
          .attr("class", function(d) { return 'shadow ' + formatClassName('text', d) })
          .text(function(d) { return d.id; });

      nodes.append("svg:text")
          .attr("class", function(d) { return formatClassName('text', d) })
          .attr("x", 15)
          .attr("y", ".31em")
          .text(function(d) { return d.id; });

    // Build linked index
    data.links.forEach(function(d) {
      linkedByIndex[d.source.index + "," + d.target.index] = 1;
    });

    // Draw the
    layout.nodes(data.nodes);
    layout.links(data.links);
    layout.on("tick", onTick);
    layout.start();

    zoom.scale(0.4);

    // Render transition
    graph.transition()
      .duration(500)
      .attr("transform", "scale(" + zoom.scale() + ")");

  }

  function onNodeMouseOver(nodes, links, d) {

    // Highlight circle
    var elm = findElementByNode('circle', d);
    elm.style("fill", '#b94431');

    // Highlight related nodes
    fadeRelatedNodes(d, .05, nodes, links);
  }

  function onNodeMouseOut(nodes, links, d) {

    // Highlight circle
    var elm = findElementByNode('circle', d);
    elm.style("fill", '#ccc');

    // Highlight related nodes
    fadeRelatedNodes(d, 1, nodes, links);
  }

  function onTick(e) {

    links.attr("d", function(d) {
      var dx = d.target.x - d.source.x,
          dy = d.target.y - d.source.y,
          dr = Math.sqrt(dx * dx + dy * dy);
      return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
    });

    nodes.attr("cx", function(d) { return d.x; })
         .attr("cy", function(d) { return d.y; })
         .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
  }

  function onControlZoomClicked(e) {
    var elmTarget = $(this)
    var scaleProcentile = 0.20;

    // Scale
    var currentScale = zoom.scale();
    var newScale;
    if(elmTarget.hasClass('control-zoom-in')) {
      newScale = currentScale * (1 + scaleProcentile);
    } else {
      newScale = currentScale * (1 - scaleProcentile);
    }
    newScale = Math.max(newScale, 0);

    // Translate
    var centerTranslate = [
      (graphWidth / 2) - (graphWidth * newScale / 2),
      (graphHeight / 2) - (graphHeight * newScale / 2)
    ];

    // Store values
    zoom
      .translate(centerTranslate)
      .scale(newScale);

    // Render transition
    graph.transition()
      .duration(500)
      .attr("transform", "translate(" + zoom.translate() + ")" + " scale(" + zoom.scale() + ")");

  }

  function onZoomChanged() {
    graph.attr("transform", "translate(" + d3.event.translate + ")" + " scale(" + d3.event.scale + ")");
  }

  function onNodeMouseDown(d) {
     d.fixed = true;
     d3.select(this).classed("sticky", true);
   }

  render();

})();

    </script>

  </body>
</html>
